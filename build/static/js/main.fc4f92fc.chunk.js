(this["webpackJsonparrow-client"]=this["webpackJsonparrow-client"]||[]).push([[0],{117:function(e,t,n){e.exports=n(169)},122:function(e,t,n){},139:function(e,t,n){},15:function(e,t,n){e.exports={base:"https://arrow.garethdev.space"}},169:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(14),r=n.n(o),c=(n(122),n(30)),i=n(29),s=n(16),u=n.n(s),d=(n(139),n(140),n(172)),m=n(17),p=n.n(m),h=n(24),E=n(9),g=n(28);function f(e){var t=e.username,n=e.password,o=e.submit,r=Object(a.useState)(!1),c=Object(E.a)(r,2),i=c[0],s=c[1],u=l.a.createElement(d.t,{content:"".concat(i?"Hide":"Show"," Password")},l.a.createElement(d.b,{icon:i?"unlock":"lock",intent:g.a.WARNING,minimal:!0,onClick:function(){return s(!i)}}));return l.a.createElement("div",null,l.a.createElement("div",{style:{width:"300px",height:"300px",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"}},l.a.createElement(d.g,{helperText:t.helperText,label:"Username",labelFor:"text-input",labelInfo:"(required)"},l.a.createElement(d.l,{id:"username-text-input",value:t.value,onChange:t.onChange})),l.a.createElement(d.g,{helperText:n.helperText,label:"Password",labelFor:"text-input",labelInfo:"(required)"},l.a.createElement(d.l,{id:"password-text-input",placeholder:"",value:n.value,onChange:n.onChange,type:i?"text":"password",rightElement:u})),l.a.createElement("div",null,l.a.createElement(d.b,{onClick:o,text:"Log in",intent:"primary"}),l.a.createElement("p",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"}},"Don't have an account?"),l.a.createElement("a",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"},href:"/signup"},"Sign up"))))}var b=function(e){var t=Object(a.useState)(e),n=Object(E.a)(t,2),l=n[0],o=n[1],r=Object(a.useState)(!1),c=Object(E.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(""),d=Object(E.a)(u,2),m=d[0],p=d[1];function h(){s(!1),p("")}return{value:l,onChange:function(e){h(),o(e.target.value)},clear:function(){o("")},hasError:i,helperText:m,setError:function(e){s(!0),p(e)},clearError:h,setValue:o}},v=n(15),C=n.n(v),x=n(49),O={user:null},w=Object(a.createContext)(O),y=w.Provider,S=function(e){var t=e.children,n=Object(a.useReducer)((function(e,t){switch(console.log("ACTION"),console.log(t),t.type){case T.SET_USER:return Object(x.a)({},e,{user:t.payload});case T.CLEAR_USER:return Object(x.a)({},e,{user:null});default:throw new Error}}),O),o=Object(E.a)(n,2),r=o[0],c=o[1];return l.a.createElement(y,{value:{state:r,dispatch:c}},t)},T={SET_USER:"SET_USER",CLEAR_USER:"CLEAR_USER"};function j(){var e=Object(a.useContext)(w).dispatch,t=Object(i.f)(),n=b(""),o=b("");function r(){return(r=Object(h.a)(p.a.mark((function a(){var l,r,c,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l={username:n.value,password:o.value},a.prev=1,a.next=4,u.a.post(v.base+"/core/auth/login",l);case 4:r=a.sent,c=r.data.token,i=r.data.user,e({type:T.SET_USER,payload:i}),localStorage.setItem("ARROW_JWT_TOKEN",c),t.push("/dashboard"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))).apply(this,arguments)}return l.a.createElement(f,{username:n,password:o,submit:function(){return r.apply(this,arguments)}})}function k(e){var t=e.username,n=e.email,o=e.password,r=e.submit,c=Object(a.useState)(!1),i=Object(E.a)(c,2),s=i[0],u=i[1],m=l.a.createElement(d.t,{content:"".concat(s?"Hide":"Show"," Password")},l.a.createElement(d.b,{icon:s?"unlock":"lock",intent:g.a.WARNING,minimal:!0,onClick:function(){return u(!s)}}));return l.a.createElement("div",null,l.a.createElement("div",{style:{width:"300px",height:"300px",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"}},l.a.createElement(d.g,{helperText:t.helperText,label:"Username",labelFor:"text-input",labelInfo:"(required)"},l.a.createElement(d.l,{id:"username-text-input",value:t.value,onChange:t.onChange})),l.a.createElement(d.g,{helperText:t.helperText,label:"Email",labelFor:"text-input",labelInfo:"(required)"},l.a.createElement(d.l,{id:"email-text-input",value:n.value,onChange:n.onChange})),l.a.createElement(d.g,{helperText:o.helperText,label:"Password",labelFor:"text-input",labelInfo:"(required)"},l.a.createElement(d.l,{id:"password-text-input",placeholder:"",value:o.value,onChange:o.onChange,type:s?"text":"password",rightElement:m})),l.a.createElement("div",null,l.a.createElement(d.b,{onClick:r,text:"Sign up",intent:"primary"}),l.a.createElement("p",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"}},"Already have an account?"),l.a.createElement("a",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"},href:"/login"},"Log in"))))}function R(){var e=Object(a.useContext)(w).dispatch,t=Object(i.f)(),n=b(),o=b(),r=b();function c(){return(c=Object(h.a)(p.a.mark((function a(){var l,o,c,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l={username:n.value,password:r.value},a.prev=1,a.next=4,u.a.post(v.base+"/core/auth/signup",l);case 4:o=a.sent,c=o.data.token,i=o.data.user,e({type:T.SET_USER,payload:i}),localStorage.setItem("ARROW_JWT_TOKEN",c),t.push("/dashboard"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))).apply(this,arguments)}return l.a.createElement(k,{username:n,email:o,password:r,submit:function(){return c.apply(this,arguments)}})}var A=n(34),I=n(35),N=(n(74),n(75),n(76),n(1));function _(e){var t=e.endpoints,n=e.selected,a=e.select,o=e.deleteAlert,r=e.cancelDelete,c=e.confirmDelete,i=e.removeSelected,s=e.view,u=e.edit,m=e.remove,p=e.endpointOverlay,h=e.handleViewClose;return l.a.createElement("div",null,l.a.createElement("section",null,l.a.createElement(d.a,{canOutsideClickCancel:!0,canEscapeKeyCancel:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete",icon:"trash",intent:g.a.DANGER,isOpen:o.isOpen,onCancel:r,onConfirm:c},l.a.createElement("p",null,"Are you sure you want to delete"," ",l.a.createElement("b",null,o.method," ",o.uri),"? This operation is irreversiable."))),l.a.createElement("div",{style:{padding:"25px"}},l.a.createElement(d.k,{bordered:!0,interactive:!0,style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"75px"}},l.a.createElement(d.b,{intent:g.a.DANGER,text:"Delete",disabled:0===n.length,onClick:i})),l.a.createElement("th",{style:{width:"100px"}},"METHOD"),l.a.createElement("th",null,"URL"),l.a.createElement("th",null,"Whitelist"),l.a.createElement("th",{style:{width:"250px"}},"Tags"),l.a.createElement("th",{style:{width:"300px"}},null))),l.a.createElement("tbody",null,t&&t.map((function(e){return l.a.createElement("tr",{key:e._id},l.a.createElement("td",{style:{textAlign:"center"}},l.a.createElement(d.c,{checked:n.includes(e._id),onChange:a(e._id)})),l.a.createElement("td",{style:{textAlign:"center"}},l.a.createElement(d.d,null,e.method)),l.a.createElement("td",null,l.a.createElement(d.d,null,v.base+e.uri)),l.a.createElement("td",null,l.a.createElement(d.r,{disabled:!0,fill:!0,values:e.whitelist})),l.a.createElement("td",null,l.a.createElement(d.r,{disabled:!0,fill:!0,values:e.tags})),l.a.createElement("td",null,l.a.createElement(d.b,{onClick:s(e._id),style:{marginRight:"10px"},small:!0,rightIcon:"eye-open",text:"View",intent:"primary",outlined:!0}),l.a.createElement(d.b,{onClick:u(e._id),style:{marginRight:"10px"},small:!0,rightIcon:"edit",text:"Edit",intent:"warning",outlined:!0}),l.a.createElement(d.b,{onClick:m(e._id),small:!0,rightIcon:"trash",text:"Delete",intent:"danger",outlined:!0})))}))))),l.a.createElement("section",null,l.a.createElement(d.q,{onClose:h,className:N.a.OVERLAY_SCROLL_CONTAINER,isOpen:p.isOpen,canEscapeKeyClose:!0,canOutsideClickClose:!0,hasBackdrop:!0,usePortal:!0,useTallContent:!1},l.a.createElement("div",{style:{top:"50%",left:"50%",width:"600px",transform:"translate(-50%, -50%)"},className:N.a.CARD},l.a.createElement(d.h,null,"[",p.method,"] ",p.uri),l.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",overflow:"scroll",width:"500px",height:"300px"},dangerouslySetInnerHTML:{__html:p.displayCode?Object(I.highlight)(p.displayCode,I.languages.js):null}}),l.a.createElement("div",null,p.whitelist&&p.whitelist.length>0&&p.whitelist.map((function(e){return l.a.createElement("div",null,e)}))),l.a.createElement("div",{className:N.a.DIALOG_FOOTER_ACTIONS},l.a.createElement(d.b,{intent:g.a.DANGER,onClick:h,style:{margin:""}},"Close"))))))}var L=n(12),D=d.s.create({className:"recipe-toaster",position:L.a.TOP}),W=n(22),M=n.n(W);function U(){var e=Object(i.f)(),t=Object(a.useState)([]),n=Object(E.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)([]),s=Object(E.a)(c,2),d=s[0],m=s[1],f=Object(a.useState)({isOpen:!1,uri:"",method:""}),b=Object(E.a)(f,2),C=b[0],x=b[1],O=Object(a.useState)({isOpen:!1}),w=Object(E.a)(O,2),y=w[0],S=w[1];function T(){return(T=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.a.getJWTConfig(),n=d.map((function(e){return'"'.concat(e,'"')})),e.prev=2,e.next=5,u.a.delete("".concat(v.base,"/core/endpoint?toDelete=[").concat(n,"]"),t);case 5:D.show({message:"Endpoints successfully deleted.",action:{onClick:function(){return window.location.reload(!1)},text:"Reload"},intent:g.a.SUCCESS}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),D.show({message:"Error deleting endpoints.",intent:g.a.DANGER});case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function j(){return(j=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.a.getJWTConfig(),e.prev=1,e.next=4,u.a.delete("".concat(v.base,'/core/endpoint?toDelete=["').concat(C.id,'"]'),t);case 4:x({isOpen:!1}),D.show({message:"Endpoint successfully deleted.",action:{onClick:function(){return window.location.reload(!1)},text:"Reload"},intent:g.a.SUCCESS}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),D.show({message:"Error deleting endpoint.",intent:g.a.DANGER});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=M.a.getJWTConfig();u.a.get("".concat(v.base,"/core/endpoint"),e).then((function(e){console.log(e.data.endpoints),r(e.data.endpoints)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(_,{endpoints:o,selected:d,select:function(e){return function(){if(d.includes(e)){var t=d.filter((function(t){return t!==e}));m(t)}else m([].concat(Object(A.a)(d),[e]))}},deleteAlert:C,confirmDelete:function(){return j.apply(this,arguments)},cancelDelete:function(){x({isOpen:!1,uri:"",method:"",id:""})},view:function(e){return function(){var t=o.filter((function(t){return t._id===e}))[0];console.log(t),S({isOpen:!0,uri:t.uri,method:t.method,whitelist:t.whitelist,displayCode:t.displayCode})}},edit:function(t){return function(){e.push("/edit/".concat(t))}},remove:function(e){return function(){var t=o.filter((function(t){return t._id===e}))[0];console.log(t),x({isOpen:!0,uri:t.uri,method:t.method,id:e})}},removeSelected:function(){return T.apply(this,arguments)},endpointOverlay:y,handleViewClose:function(){S({isOpen:!1})}})}var J=n(81),G=n.n(J);function P(e){var t=e.uri,n=e.handleMethodChange,a=e.method,o=e.code,r=e.onCodeChange,c=e.testCode,i=e.createEndpoint,s=e.authorizedDomains,u=e.testResults,m=e.showTestResults,p=e.editMode,h=e.tags;return l.a.createElement("div",{style:{padding:"30px"}},l.a.createElement("section",null,l.a.createElement(d.h,null,p?"Edit API Endpoint":"Create API Endpoint"),l.a.createElement(d.f,{style:{marginBottom:"15px"}},l.a.createElement(d.j,{style:{width:"100px"},id:"method-selector",value:a,options:["GET","POST","PUT","PATCH","DELETE"],onChange:n}),l.a.createElement(d.l,{style:{width:"450px"},id:"endpoint-uri-text-input",placeholder:"/animals/dogs/breeds/golden-retriever",value:t.value,onChange:t.onChange})),l.a.createElement("div",{style:{width:"550px",marginBottom:"15px",border:"1px solid lightgrey"}},l.a.createElement(G.a,{value:o,onValueChange:r,highlight:function(e){return Object(I.highlight)(e,I.languages.js)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12}}))),l.a.createElement("section",null,l.a.createElement("div",{style:{width:"300px"}},l.a.createElement(d.i,null,"Authorized Domain Origins"),l.a.createElement("p",null,"Only requests made from these domains can access your API."),l.a.createElement("div",{style:{marginBottom:"15px"}},l.a.createElement(d.r,{onChange:s.onChange,placeholder:"www.website.com",rightElement:s.values.length>0&&l.a.createElement(d.b,{icon:"cross",minimal:!0,onClick:s.clear}),values:s.values})))),l.a.createElement("section",{style:{marginBottom:"15px",width:"550px"}},l.a.createElement(d.i,null,"Tags"),l.a.createElement("p",null,"Add tags to keep track of your endpoint."),l.a.createElement(d.r,{onChange:h.onChange,placeholder:"Tag this endpoint",rightElement:h.values.length>0&&l.a.createElement(d.b,{icon:"cross",minimal:!0,onClick:h.clear}),values:h.values})),l.a.createElement("section",null,l.a.createElement(d.i,null,"Test Your Endpoint"),l.a.createElement("div",{style:{marginBottom:"15px"}},l.a.createElement(d.b,{onClick:c,rightIcon:"lab-test",intent:"warning",text:"Check Validity"})),l.a.createElement("p",null,"Results:"),l.a.createElement("div",{style:{width:"550px",marginBottom:"15px",border:"1px solid lightgrey"}},l.a.createElement(d.e,{isOpen:m},l.a.createElement("pre",null,u.map((function(e){return l.a.createElement("div",null,l.a.createElement("code",null,"[",e.time,"] ",e.message))})))))),l.a.createElement(d.b,{onClick:i,rightIcon:"cloud-upload",intent:"primary",text:p?"Update Endpoint":"Create Endpoint"}))}function B(e){var t=Object(a.useState)(e||[]),n=Object(E.a)(t,2),l=n[0],o=n[1];return{values:l,clear:function(){o([])},set:function(e){o(e)},add:function(e){o([].concat(Object(A.a)(l),[e]))},onChange:function(e){o(e)}}}function q(){var e=Object(i.f)(),t=b(""),n=Object(a.useState)("module.exports = (req, res) => {\n    /* Your code here */\n\n    /* Make sure to return a response object */\n    return res.status(200).send();\n}\n"),o=Object(E.a)(n,2),r=o[0],c=o[1],s=Object(a.useState)("GET"),d=Object(E.a)(s,2),m=d[0],p=d[1],h=B(),f=Object(a.useState)([]),C=Object(E.a)(f,2),x=C[0],O=C[1],w=Object(a.useState)(!0),y=Object(E.a)(w,2),S=y[0],T=y[1],j=Object(a.useState)(!1),k=Object(E.a)(j,2),R=k[0],I=k[1],N=B();return Object(a.useEffect)((function(){if(console.log(e.location.pathname.split("/")[1]),"edit"===e.location.pathname.split("/")[1]){I(!0);var n=e.location.pathname.split("/")[2],a=M.a.getJWTConfig();u.a.get(v.base+"/core/endpoint/"+n,a).then((function(e){var n=e.data.endpoint;p(n.method),h.set(n.whitelist),c(n.displayCode),N.set(n.tags);var a=n.uri.split("/").splice(3).map((function(e){return"/"+e}))[0];t.setValue(a)})).catch((function(e){console.log(e)}))}}),[e.location.pathname]),l.a.createElement(P,{uri:t,handleMethodChange:function(e){p(e.currentTarget.value)},method:m,code:r,onCodeChange:function(e){c(e)},testCode:function(){var e={uri:t.value.substring(1),method:m,content:r,whitelist:h.values,body:{},query:{}},n=M.a.getJWTConfig();u.a.post(v.base+"/core/endpoint/validate",e,n).then((function(e){var t=new Date;O([].concat(Object(A.a)(x),[{message:e.data.message,time:t.toLocaleTimeString()}])),T(!0)})).catch((function(e){console.log(e)}))},createEndpoint:function(){console.log(t.value);var n={uri:t.value.substring(1),method:m,content:r,whitelist:h.values,body:{},query:{},tags:N.values},a=M.a.getJWTConfig();R?u.a.patch("".concat(v.base,"/core/endpoint/").concat(e.location.pathname.split("/")[2]),n,a).then((function(t){console.log(t),D.show({message:"Endpoint updated. ",action:{onClick:function(){return e.push("/dashboard")},text:"Go to Dashboard"},intent:g.a.SUCCESS})})).catch((function(e){console.log(e)})):u.a.post(v.base+"/core/endpoint",n,a).then((function(t){console.log(t),D.show({message:"Endpoint created. ",action:{onClick:function(){return e.push("/dashboard")},text:"Go to Dashboard"},intent:g.a.SUCCESS})})).catch((function(e){console.log(e)}))},authorizedDomains:h,testResults:x,showTestResults:S,editMode:R,tags:N})}var F=n(37);function z(e){var t=e.goto,n=e.logout,o=Object(a.useContext)(w).state;return console.log(o),l.a.createElement(d.m,null,l.a.createElement(d.o,{align:F.a.LEFT},l.a.createElement(d.p,null,"Arrow"),l.a.createElement(d.n,null),l.a.createElement(d.b,{onClick:t("/"),className:N.a.MINIMAL,icon:"home",text:"Home"}),l.a.createElement(d.b,{onClick:t("/dashboard"),className:N.a.MINIMAL,icon:"control",text:"Dashboard"}),l.a.createElement(d.b,{onClick:t("/create"),className:N.a.MINIMAL,icon:"add",text:"Create"})),l.a.createElement(d.o,{align:F.a.RIGHT},o.user?l.a.createElement(d.b,{onClick:n,className:N.a.MINIMAL,icon:"log-out",text:"Logout"}):l.a.createElement(d.b,{onClick:t("/login"),className:N.a.MINIMAL,icon:"log-in",text:"Log in"})))}function V(){var e=Object(i.f)(),t=Object(a.useContext)(w).dispatch;Object(a.useEffect)((function(){var e=M.a.getJWTConfig();u.a.get(C.a.base+"/core/auth/",e).then((function(e){t({type:T.SET_USER,payload:e.data})})).then((function(e){console.log(e)}))}),[]);var n=function(){var n=Object(h.a)(p.a.mark((function n(){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=M.a.getJWTConfig(),n.prev=1,n.next=4,u.a.post(C.a.base+"/core/auth/logout",{},a);case 4:t({type:T.CLEAR_USER}),e.push("/"),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}();return l.a.createElement(z,{goto:function(t){return function(){e.push(t)}},logout:n})}function H(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Welcome to Arrow"),l.a.createElement(d.b,{intent:"primary",text:"Nice"}))}var K=function(){return l.a.createElement(S,null,l.a.createElement(c.a,null,l.a.createElement(V,null),l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:H}),l.a.createElement(i.a,{path:"/signup",component:R}),l.a.createElement(i.a,{path:"/login",component:j}),l.a.createElement(i.a,{path:"/dashboard",component:U}),l.a.createElement(i.a,{path:"/create",component:q}),l.a.createElement(i.a,{path:"/edit",component:q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},22:function(e,t){e.exports={getJWT:function(){return localStorage.getItem("ARROW_JWT_TOKEN")},getJWTConfig:function(){return{headers:{Authorization:"Bearer "+localStorage.getItem("ARROW_JWT_TOKEN")}}}}},76:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.fc4f92fc.chunk.js.map