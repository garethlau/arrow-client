(this["webpackJsonparrow-client"]=this["webpackJsonparrow-client"]||[]).push([[0],{120:function(e,t,n){e.exports=n(172)},125:function(e,t,n){},142:function(e,t,n){},16:function(e,t,n){e.exports={base:"https://arrow.garethdev.space"}},172:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(14),r=n.n(l),c=(n(125),n(29)),i=n(28),s=n(15),u=n.n(s),d=(n(142),n(143),n(175)),m=n(24),p=n.n(m),h=n(33),E=n(9),g=n(27);function f(e){var t=e.username,n=e.password,l=e.submit,r=Object(a.useState)(!1),c=Object(E.a)(r,2),i=c[0],s=c[1],u=o.a.createElement(d.r,{content:"".concat(i?"Hide":"Show"," Password")},o.a.createElement(d.b,{icon:i?"unlock":"lock",intent:g.a.WARNING,minimal:!0,onClick:function(){return s(!i)}}));return o.a.createElement("div",null,o.a.createElement("div",{style:{width:"300px",height:"300px",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"}},o.a.createElement(d.f,{helperText:t.helperText,label:"Username",labelFor:"text-input",labelInfo:"(required)"},o.a.createElement(d.k,{id:"username-text-input",value:t.value,onChange:t.onChange})),o.a.createElement(d.f,{helperText:n.helperText,label:"Password",labelFor:"text-input",labelInfo:"(required)"},o.a.createElement(d.k,{id:"password-text-input",placeholder:"",value:n.value,onChange:n.onChange,type:i?"text":"password",rightElement:u})),o.a.createElement("div",null,o.a.createElement(d.b,{onClick:l,text:"Log in",intent:"primary"}),o.a.createElement("p",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"}},"Don't have an account?"),o.a.createElement("a",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"},href:"/signup"},"Sign up"))))}var b=function(e){var t=Object(a.useState)(e),n=Object(E.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)(!1),c=Object(E.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(""),d=Object(E.a)(u,2),m=d[0],p=d[1];function h(){s(!1),p("")}return{value:o,onChange:function(e){h(),l(e.target.value)},clear:function(){l("")},hasError:i,helperText:m,setError:function(e){s(!0),p(e)},clearError:h,setValue:l}},v=n(16),C=n.n(v),x=n(49),O={user:null},y=Object(a.createContext)(O),w=y.Provider,S=function(e){var t=e.children,n=Object(a.useReducer)((function(e,t){switch(console.log("ACTION"),console.log(t),t.type){case T.SET_USER:return Object(x.a)({},e,{user:t.payload});case T.CLEAR_USER:return Object(x.a)({},e,{user:null});default:throw new Error}}),O),l=Object(E.a)(n,2),r=l[0],c=l[1];return o.a.createElement(w,{value:{state:r,dispatch:c}},t)},T={SET_USER:"SET_USER",CLEAR_USER:"CLEAR_USER"};function j(){var e=Object(a.useContext)(y).dispatch,t=Object(i.f)(),n=b(""),l=b("");function r(){return(r=Object(h.a)(p.a.mark((function a(){var o,r,c,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={username:n.value,password:l.value},a.prev=1,a.next=4,u.a.post(v.base+"/core/auth/login",o);case 4:r=a.sent,c=r.data.token,i=r.data.user,e({type:T.SET_USER,payload:i}),localStorage.setItem("ARROW_JWT_TOKEN",c),t.push("/dashboard"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))).apply(this,arguments)}return o.a.createElement(f,{username:n,password:l,submit:function(){return r.apply(this,arguments)}})}function k(e){var t=e.username,n=e.email,l=e.password,r=e.submit,c=Object(a.useState)(!1),i=Object(E.a)(c,2),s=i[0],u=i[1],m=o.a.createElement(d.r,{content:"".concat(s?"Hide":"Show"," Password")},o.a.createElement(d.b,{icon:s?"unlock":"lock",intent:g.a.WARNING,minimal:!0,onClick:function(){return u(!s)}}));return o.a.createElement("div",null,o.a.createElement("div",{style:{width:"300px",height:"300px",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"}},o.a.createElement(d.f,{helperText:t.helperText,label:"Username",labelFor:"text-input",labelInfo:"(required)"},o.a.createElement(d.k,{id:"username-text-input",value:t.value,onChange:t.onChange})),o.a.createElement(d.f,{helperText:t.helperText,label:"Email",labelFor:"text-input",labelInfo:"(required)"},o.a.createElement(d.k,{id:"email-text-input",value:n.value,onChange:n.onChange})),o.a.createElement(d.f,{helperText:l.helperText,label:"Password",labelFor:"text-input",labelInfo:"(required)"},o.a.createElement(d.k,{id:"password-text-input",placeholder:"",value:l.value,onChange:l.onChange,type:s?"text":"password",rightElement:m})),o.a.createElement("div",null,o.a.createElement(d.b,{onClick:r,text:"Sign up",intent:"primary"}),o.a.createElement("p",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"}},"Already have an account?"),o.a.createElement("a",{style:{fontSize:"0.85em",display:"inline",marginLeft:"5px"},href:"/login"},"Log in"))))}function R(){var e=Object(a.useContext)(y).dispatch,t=Object(i.f)(),n=b(),l=b(),r=b();function c(){return(c=Object(h.a)(p.a.mark((function a(){var o,l,c,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={username:n.value,password:r.value},a.prev=1,a.next=4,u.a.post(v.base+"/core/auth/signup",o);case 4:l=a.sent,c=l.data.token,i=l.data.user,e({type:T.SET_USER,payload:i}),localStorage.setItem("ARROW_JWT_TOKEN",c),t.push("/dashboard"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))).apply(this,arguments)}return o.a.createElement(k,{username:n,email:l,password:r,submit:function(){return c.apply(this,arguments)}})}var A=n(38),I=n(34),_=(n(74),n(75),n(76),n(1));function N(e){var t=e.endpoints,n=e.selected,a=e.select,l=e.deleteAlert,r=e.cancelDelete,c=e.confirmDelete,i=e.view,s=e.edit,u=e.remove,m=e.endpointOverlay,p=e.handleViewClose;return o.a.createElement("div",null,o.a.createElement("section",null,o.a.createElement(d.a,{canOutsideClickCancel:!0,canEscapeKeyCancel:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete",icon:"trash",intent:g.a.DANGER,isOpen:l.isOpen,onCancel:r,onConfirm:c},o.a.createElement("p",null,"Are you sure you want to delete"," ",o.a.createElement("b",null,l.method," ",l.uri),"? This operation is irreversiable."))),o.a.createElement("div",{style:{padding:"25px"}},o.a.createElement(d.j,{bordered:!0,interactive:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{width:"75px"}},null),o.a.createElement("th",{style:{width:"100px"}},"METHOD"),o.a.createElement("th",null,"URL"),o.a.createElement("th",null,"Whitelist"),o.a.createElement("th",{style:{width:"300px"}},null))),o.a.createElement("tbody",null,t&&t.map((function(e){return o.a.createElement("tr",{key:e._id},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement(d.c,{checked:n.includes(e._id),onChange:a(e._id)})),o.a.createElement("td",null,e.method),o.a.createElement("td",null,e.uri),o.a.createElement("td",null,e.whitelist.toString()),o.a.createElement("td",null,o.a.createElement(d.b,{onClick:i(e._id),style:{marginRight:"10px"},small:!0,rightIcon:"eye-open",text:"View",intent:"primary",outlined:!0}),o.a.createElement(d.b,{onClick:s(e._id),style:{marginRight:"10px"},small:!0,rightIcon:"edit",text:"Edit",intent:"warning",outlined:!0}),o.a.createElement(d.b,{onClick:u(e._id),small:!0,rightIcon:"trash",text:"Delete",intent:"danger",outlined:!0})))}))))),o.a.createElement("section",null,o.a.createElement(d.p,{onClose:p,className:_.a.OVERLAY_SCROLL_CONTAINER,isOpen:m.isOpen,canEscapeKeyClose:!0,canOutsideClickClose:!0,hasBackdrop:!0,usePortal:!0,useTallContent:!1},o.a.createElement("div",{style:{top:"50%",left:"50%",width:"600px",transform:"translate(-50%, -50%)"},className:_.a.CARD},o.a.createElement(d.g,null,"[",m.method,"] ",m.uri),o.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",overflow:"scroll",width:"500px",height:"300px"},dangerouslySetInnerHTML:{__html:m.displayCode?Object(I.highlight)(m.displayCode,I.languages.js):null}}),o.a.createElement("div",null,m.whitelist&&m.whitelist.length>0&&m.whitelist.map((function(e){return o.a.createElement("div",null,e)}))),o.a.createElement("div",{className:_.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(d.b,{intent:g.a.DANGER,onClick:p,style:{margin:""}},"Close"))))))}var D=n(12),L=d.q.create({className:"recipe-toaster",position:D.a.TOP}),W=n(21),M=n.n(W);function U(){var e=Object(i.f)(),t=Object(a.useState)([]),n=Object(E.a)(t,2),l=n[0],r=n[1],c=Object(a.useState)([""]),s=Object(E.a)(c,2),d=s[0],m=s[1],p=Object(a.useState)({isOpen:!1,uri:"",method:""}),h=Object(E.a)(p,2),f=h[0],b=h[1],C=Object(a.useState)({isOpen:!1}),x=Object(E.a)(C,2),O=x[0],y=x[1];return Object(a.useEffect)((function(){var e=M.a.getJWTConfig();u.a.get("".concat(v.base,"/core/endpoint"),e).then((function(e){console.log(e.data.endpoints),r(e.data.endpoints)})).catch((function(e){console.log(e)}))}),[]),o.a.createElement(N,{endpoints:l,selected:d,select:function(e){return function(){if(d.includes(e)){var t=d.filter((function(t){return t!==e}));m(t)}else m([].concat(Object(A.a)(d),[e]))}},deleteAlert:f,confirmDelete:function(){var e=M.a.getJWTConfig();u.a.delete("".concat(v.base,'/core/endpoint?toDelete=["').concat(f.id,'"]'),e).then((function(e){b({isOpen:!1}),L.show({message:"Endpoint successfully deleted.",action:{onClick:function(){return window.location.reload(!1)},text:"Refresh"},intent:g.a.SUCCESS})})).catch((function(e){console.log(e)}))},cancelDelete:function(){b({isOpen:!1,uri:"",method:"",id:""})},view:function(e){return function(){var t=l.filter((function(t){return t._id===e}))[0];console.log(t),y({isOpen:!0,uri:t.uri,method:t.method,whitelist:t.whitelist,displayCode:t.displayCode})}},edit:function(t){return function(){e.push("/edit/".concat(t))}},remove:function(e){return function(){var t=l.filter((function(t){return t._id===e}))[0];console.log(t),b({isOpen:!0,uri:t.uri,method:t.method,id:e})}},endpointOverlay:O,handleViewClose:function(){y({isOpen:!1})}})}var J=n(81),P=n.n(J);function B(e){var t=e.uri,n=e.handleMethodChange,a=e.method,l=e.code,r=e.onCodeChange,c=e.testCode,i=e.createEndpoint,s=e.whitelist,u=e.authorizedDomains,m=e.addDomain,p=e.removeDomain,h=e.testResults,E=e.showTestResults,g=e.editMode;return o.a.createElement("div",{style:{padding:"30px"}},o.a.createElement("section",null,o.a.createElement(d.g,null,g?"Edit API Endpoint":"Create API Endpoint"),o.a.createElement(d.e,{style:{marginBottom:"15px"}},o.a.createElement(d.i,{style:{width:"100px"},id:"method-selector",value:a,options:["GET","POST","PUT","PATCH","DELETE"],onChange:n}),o.a.createElement(d.k,{style:{width:"450px"},id:"endpoint-uri-text-input",placeholder:"/animals/dogs/breeds/golden-retriever",value:t.value,onChange:t.onChange})),o.a.createElement("div",{style:{width:"550px",marginBottom:"15px",border:"1px solid lightgrey"}},o.a.createElement(P.a,{value:l,onValueChange:r,highlight:function(e){return Object(I.highlight)(e,I.languages.js)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12}}))),o.a.createElement("section",null,o.a.createElement("div",{style:{width:"300px"}},o.a.createElement(d.h,null,"Authorized Domain Origins"),o.a.createElement("p",null,"Only requests made from these domains can access your API."),o.a.createElement("div",{style:{marginBottom:"15px"}},u.length>0&&u.map((function(e){return o.a.createElement("div",null,o.a.createElement(d.b,{icon:"remove",minimal:!0,onClick:p(e),intent:"danger",small:!0}),e)}))),o.a.createElement("div",{style:{marginBottom:"15px"}},o.a.createElement(d.f,{helperText:s.helperText},o.a.createElement(d.k,{placeholder:"realurl.com",onChange:s.onChange,value:s.value})),o.a.createElement(d.b,{onClick:m,rightIcon:"add",intent:"primary",text:"Add Domain"})))),o.a.createElement("section",null,o.a.createElement(d.h,null,"Test Your Endpoint"),o.a.createElement("div",{style:{marginBottom:"15px"}},o.a.createElement(d.b,{onClick:c,rightIcon:"lab-test",intent:"warning",text:"Check Validity"})),o.a.createElement("p",null,"Results:"),o.a.createElement("div",{style:{width:"550px",marginBottom:"15px",border:"1px solid lightgrey"}},o.a.createElement(d.d,{isOpen:E},o.a.createElement("pre",null,h.map((function(e){return o.a.createElement("div",null,o.a.createElement("code",null,"[",e.time,"] ",e.message))})))))),o.a.createElement(d.b,{onClick:i,rightIcon:"cloud-upload",intent:"primary",text:g?"Update Endpoint":"Create Endpoint"}))}function q(){var e=Object(i.f)(),t=b(""),n=Object(a.useState)("module.exports = (req, res) => {\n    /* Your code here */\n\n    /* Make sure to return a response object */\n    return res.status(200).send();\n}\n"),l=Object(E.a)(n,2),r=l[0],c=l[1],s=Object(a.useState)("GET"),d=Object(E.a)(s,2),m=d[0],p=d[1],h=b(""),f=Object(a.useState)([]),C=Object(E.a)(f,2),x=C[0],O=C[1],y=Object(a.useState)([]),w=Object(E.a)(y,2),S=w[0],T=w[1],j=Object(a.useState)(!0),k=Object(E.a)(j,2),R=k[0],I=k[1],_=Object(a.useState)(!1),N=Object(E.a)(_,2),D=N[0],W=N[1];Object(a.useEffect)((function(){if(console.log(e.location.pathname.split("/")[1]),"edit"===e.location.pathname.split("/")[1]){W(!0);var n=e.location.pathname.split("/")[2],a=M.a.getJWTConfig();u.a.get(v.base+"/core/endpoint/"+n,a).then((function(e){console.log(e);var n=e.data.endpoint;p(n.method),O(n.whitelist),c(n.displayCode);var a=n.uri.split("/").splice(3).map((function(e){return"/"+e}));t.setValue(a)})).catch((function(e){console.log(e)}))}}),[e.location.pathname]);return o.a.createElement(B,{uri:t,handleMethodChange:function(e){p(e.currentTarget.value)},method:m,code:r,onCodeChange:function(e){c(e)},testCode:function(){var e={uri:t.value.substring(1),method:m,content:r,whitelist:x,body:{},query:{}},n=M.a.getJWTConfig();u.a.post(v.base+"/core/endpoint/validate",e,n).then((function(e){var t=new Date;T([].concat(Object(A.a)(S),[{message:e.data.message,time:t.toLocaleTimeString()}])),I(!0)})).catch((function(e){console.log(e)}))},createEndpoint:function(){var n={uri:t.value.substring(1),method:m,content:r,whitelist:x,body:{},query:{}},a=M.a.getJWTConfig();D?u.a.patch("".concat(v.base,"/core/endpoint/").concat(e.location.pathname.split("/")[2]),n,a).then((function(t){console.log(t),L.show({message:"Endpoint updated. ",action:{onClick:function(){return e.push("/dashboard")},text:"Go to Dashboard"},intent:g.a.SUCCESS})})).catch((function(e){console.log(e)})):u.a.post(v.base+"/core/endpoint",n,a).then((function(t){console.log(t),L.show({message:"Endpoint created. ",action:{onClick:function(){return e.push("/dashboard")},text:"Go to Dashboard"},intent:g.a.SUCCESS})})).catch((function(e){console.log(e)}))},whitelist:h,authorizedDomains:x,addDomain:function(){x.includes(h.value)?h.setError("Domain already whitelisted."):(O([].concat(Object(A.a)(x),[h.value])),h.clear())},removeDomain:function(e){return function(){O(x.filter((function(t){return t!==e})))}},testResults:S,showTestResults:R,editMode:D})}var F=n(36);function G(e){var t=e.goto,n=e.logout,l=Object(a.useContext)(y).state;return console.log(l),o.a.createElement(d.l,null,o.a.createElement(d.n,{align:F.a.LEFT},o.a.createElement(d.o,null,"Arrow"),o.a.createElement(d.m,null),o.a.createElement(d.b,{onClick:t("/"),className:_.a.MINIMAL,icon:"home",text:"Home"}),o.a.createElement(d.b,{onClick:t("/dashboard"),className:_.a.MINIMAL,icon:"control",text:"Dashboard"}),o.a.createElement(d.b,{onClick:t("/create"),className:_.a.MINIMAL,icon:"add",text:"Create"})),o.a.createElement(d.n,{align:F.a.RIGHT},l.user?o.a.createElement(d.b,{onClick:n,className:_.a.MINIMAL,icon:"log-out",text:"Logout"}):o.a.createElement(d.b,{onClick:t("/login"),className:_.a.MINIMAL,icon:"log-in",text:"Log in"})))}function z(){var e=Object(i.f)(),t=Object(a.useContext)(y).dispatch;Object(a.useEffect)((function(){var e=M.a.getJWTConfig();u.a.get(C.a.base+"/core/auth/",e).then((function(e){t({type:T.SET_USER,payload:e.data})})).then((function(e){console.log(e)}))}),[]);var n=function(){var n=Object(h.a)(p.a.mark((function n(){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=M.a.getJWTConfig(),n.prev=1,n.next=4,u.a.post(C.a.base+"/core/auth/logout",{},a);case 4:t({type:T.CLEAR_USER}),e.push("/"),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}();return o.a.createElement(G,{goto:function(t){return function(){e.push(t)}},logout:n})}function V(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Welcome to Arrow"),o.a.createElement(d.b,{intent:"primary",text:"Nice"}))}var H=function(){return o.a.createElement(S,null,o.a.createElement(c.a,null,o.a.createElement(z,null),o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:V}),o.a.createElement(i.a,{path:"/signup",component:R}),o.a.createElement(i.a,{path:"/login",component:j}),o.a.createElement(i.a,{path:"/dashboard",component:U}),o.a.createElement(i.a,{path:"/create",component:q}),o.a.createElement(i.a,{path:"/edit",component:q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},21:function(e,t){e.exports={getJWT:function(){return localStorage.getItem("ARROW_JWT_TOKEN")},getJWTConfig:function(){return{headers:{Authorization:"Bearer "+localStorage.getItem("ARROW_JWT_TOKEN")}}}}},76:function(e,t,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.5ae61a69.chunk.js.map